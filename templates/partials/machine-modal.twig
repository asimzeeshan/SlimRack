<!-- Machine Modal -->
<div class="modal fade" id="machineModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="machineModalTitle">Add Machine</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <form id="machineForm">
                <div class="modal-body">
                    <input type="hidden" name="machine_id" id="machineId">

                    <!-- Basic Info -->
                    <div class="row mb-3">
                        <div class="col-md-8">
                            <label for="machineLabel" class="form-label">Label <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="machineLabel" name="label" required>
                        </div>
                        <div class="col-md-4">
                            <label for="machineVirtualization" class="form-label">Virtualization</label>
                            <select class="form-select" id="machineVirtualization" name="virtualization">
                                <option value="">Select...</option>
                                {% for type in virtualizationTypes %}
                                <option value="{{ type }}">{{ type }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>

                    <!-- Provider & Location -->
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label for="machineProvider" class="form-label">Provider</label>
                            <select class="form-select" id="machineProvider" name="provider_id">
                                <option value="">Select...</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label for="machineCountry" class="form-label">Country</label>
                            <select class="form-select" id="machineCountry" name="country_code">
                                <option value="">Select...</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label for="machineCity" class="form-label">City</label>
                            <input type="text" class="form-control" id="machineCity" name="city_name" autocomplete="off">
                        </div>
                    </div>

                    <!-- Hardware Specs -->
                    <h6 class="border-bottom pb-2 mb-3">Hardware Specifications</h6>
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <label for="machineCpuCore" class="form-label">CPU Cores</label>
                            <input type="number" class="form-control" id="machineCpuCore" name="cpu_core" min="0">
                        </div>
                        <div class="col-md-3">
                            <label for="machineCpuSpeed" class="form-label">CPU Speed (MHz)</label>
                            <input type="number" class="form-control" id="machineCpuSpeed" name="cpu_speed" min="0">
                        </div>
                        <div class="col-md-3">
                            <label for="machineMemory" class="form-label">RAM (MB)</label>
                            <input type="number" class="form-control" id="machineMemory" name="memory" min="0">
                        </div>
                        <div class="col-md-3">
                            <label for="machineSwap" class="form-label">Swap (MB)</label>
                            <input type="number" class="form-control" id="machineSwap" name="swap" min="0">
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label for="machineDiskType" class="form-label">Disk Type</label>
                            <select class="form-select" id="machineDiskType" name="disk_type">
                                <option value="">Select...</option>
                                {% for type in diskTypes %}
                                <option value="{{ type }}">{{ type }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label for="machineDiskSpace" class="form-label">Disk Space (GB)</label>
                            <input type="number" class="form-control" id="machineDiskSpace" name="disk_space" min="0">
                        </div>
                        <div class="col-md-4">
                            <label for="machineBandwidth" class="form-label">Bandwidth (GB)</label>
                            <input type="number" class="form-control" id="machineBandwidth" name="bandwidth" min="0">
                        </div>
                    </div>

                    <!-- Network -->
                    <h6 class="border-bottom pb-2 mb-3">Network</h6>
                    <div class="row mb-3">
                        <div class="col-md-8">
                            <label for="machineIpAddress" class="form-label">IP Address(es)</label>
                            <textarea class="form-control" id="machineIpAddress" name="ip_address" rows="2" placeholder="One IP per line"></textarea>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">&nbsp;</label>
                            <div class="form-check mt-2">
                                <input class="form-check-input" type="checkbox" id="machineIsNat" name="is_nat">
                                <label class="form-check-label" for="machineIsNat">NAT Network</label>
                            </div>
                        </div>
                    </div>

                    <!-- Billing -->
                    <h6 class="border-bottom pb-2 mb-3">Billing</h6>
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <label for="machinePrice" class="form-label">Price</label>
                            <input type="number" class="form-control" id="machinePrice" name="price" min="0" step="0.01">
                        </div>
                        <div class="col-md-3">
                            <label for="machineCurrency" class="form-label">Currency</label>
                            <select class="form-select" id="machineCurrency" name="currency_code">
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label for="machinePaymentCycle" class="form-label">Payment Cycle</label>
                            <select class="form-select" id="machinePaymentCycle" name="payment_cycle_id">
                                <option value="">Select...</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label for="machineDueDate" class="form-label">Due Date</label>
                            <input type="text" class="form-control datepicker" id="machineDueDate" name="due_date" autocomplete="off">
                        </div>
                    </div>

                    <!-- Notes -->
                    <div class="mb-3">
                        <label for="machineNotes" class="form-label">Notes</label>
                        <textarea class="form-control" id="machineNotes" name="notes" rows="3"></textarea>
                    </div>

                    <!-- Hidden Status -->
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="machineIsHidden" name="is_hidden">
                        <label class="form-check-label" for="machineIsHidden">Hidden from main view</label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="machineSubmit">
                        <span class="spinner-border spinner-border-sm d-none" role="status"></span>
                        <span class="btn-text">Save Machine</span>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">Confirm Delete</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p id="deleteMessage">Are you sure you want to delete this machine?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirmDelete">Delete</button>
            </div>
        </div>
    </div>
</div>
